/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){var e=["vs/code/browser/workbench/workbench","require","exports","vs/workbench/workbench.web.api","vs/base/common/uuid","vs/base/common/cancellation","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/parts/request/browser/request","vs/platform/windows/common/windows"];define(e[0],function(t){for(var r=[],s=0,o=t.length;s<o;s++)r[s]=e[t[s]];return r}([1,2,3,4,5,6,7,8,9]),(function(e,t,r,s,o,a,i,n,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d{get credentials(){if(!this._credentials){try{const e=window.localStorage.getItem(d.CREDENTIALS_OPENED_KEY);e&&(this._credentials=JSON.parse(e))}catch(e){}Array.isArray(this._credentials)||(this._credentials=[])}return this._credentials}save(){window.localStorage.setItem(d.CREDENTIALS_OPENED_KEY,JSON.stringify(this.credentials))}async getPassword(e,t){return this.doGetPassword(e,t)}async doGetPassword(e,t){for(const r of this.credentials)if(r.service===e&&("string"!=typeof t||t===r.account))return r.password;return null}
async setPassword(e,t,r){this.deletePassword(e,t),this.credentials.push({service:e,account:t,password:r}),this.save()}async deletePassword(e,t){let r=!1;return this._credentials=this.credentials.filter(s=>s.service!==e||s.account!==t||(r=!0,!1)),r&&this.save(),r}async findPassword(e){return this.doGetPassword(e)}async findCredentials(e){return this.credentials.filter(t=>t.service===e).map(({account:e,password:t})=>({account:e,password:t}))}}d.CREDENTIALS_OPENED_KEY="credentials.provider";class l extends i.Disposable{constructor(){super(...arguments),this._onCallback=this._register(new r.Emitter),this.onCallback=this._onCallback.event}create(e){const t=new Map,r=s.generateUuid();t.set(l.QUERY_KEYS.REQUEST_ID,r);const{scheme:o,authority:a,path:i,query:n,fragment:c}=e||{scheme:void 0,authority:void 0,path:void 0,query:void 0,fragment:void 0};return o&&t.set(l.QUERY_KEYS.SCHEME,o),a&&t.set(l.QUERY_KEYS.AUTHORITY,a),i&&t.set(l.QUERY_KEYS.PATH,i),n&&t.set(l.QUERY_KEYS.QUERY,n),c&&t.set(l.QUERY_KEYS.FRAGMENT,c),
this.periodicFetchCallback(r,Date.now()),this.doCreateUri("/callback",t)}async periodicFetchCallback(e,t){const s=new Map;s.set(l.QUERY_KEYS.REQUEST_ID,e);const i=await n.request({url:this.doCreateUri("/fetch-callback",s).toString(!0)},o.CancellationToken.None),c=await a.streamToBuffer(i.stream);if(c.byteLength>0)try{this._onCallback.fire(r.URI.revive(JSON.parse(c.toString())))}catch(e){console.error(e)}else Date.now()-t<l.FETCH_TIMEOUT&&setTimeout(()=>this.periodicFetchCallback(e,t),l.FETCH_INTERVAL)}doCreateUri(e,t){let s=void 0;if(t){let e=0;t.forEach((t,r)=>{s||(s="");const o=0==e++?"":"&";s+=`${o}${r}=${encodeURIComponent(t)}`})}return r.URI.parse(window.location.href).with({path:e,query:s})}}l.FETCH_INTERVAL=500,l.FETCH_TIMEOUT=3e5,l.QUERY_KEYS={REQUEST_ID:"vscode-requestId",SCHEME:"vscode-scheme",AUTHORITY:"vscode-authority",PATH:"vscode-path",QUERY:"vscode-query",FRAGMENT:"vscode-fragment"};const h=JSON.parse(document.getElementById("vscode-workbench-web-configuration").getAttribute("data-settings"))
;h.workspaceProvider=new class{constructor(e){this.workspace=e}async open(e,t){let r=void 0;e?c.isFolderToOpen(e)?r=`${document.location.origin}${document.location.pathname}?folder=${e.folderUri.path}`:c.isWorkspaceToOpen(e)&&(r=`${document.location.origin}${document.location.pathname}?workspace=${e.workspaceUri.path}`):r=`${document.location.origin}${document.location.pathname}?ew=true`,r&&(t&&t.reuse?window.location.href=r:window.open(r))}}(h.folderUri?{folderUri:r.URI.revive(h.folderUri)}:h.workspaceUri?{workspaceUri:r.URI.revive(h.workspaceUri)}:void 0),h.urlCallbackProvider=new l,h.credentialsProvider=new d,Array.isArray(h.staticExtensions)&&h.staticExtensions.forEach(e=>{e.extensionLocation=r.URI.revive(e.extensionLocation)}),r.create(document.body,h)}))}).call(this);
//# sourceMappingURL=workbench.js.map